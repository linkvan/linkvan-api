#!/bin/bash
set -e

# Pass all arguments to the rspec command inside docker
if [ $# -eq 0 ]; then
    # No arguments provided, run all tests
    docker-compose -f docker-compose.ci.yml run --rm test
else
    # Arguments provided, pass them to rspec
    docker-compose -f docker-compose.ci.yml run --rm test bash -c "./bin/setup && ./bin/rake assets:precompile && ./bin/bundle exec rspec $*"
fi
